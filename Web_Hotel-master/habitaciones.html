<!DOCTYPE html>
<html lang="es">
<head>
    <title>Hotel*Star</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/png" href="IMG/favicon.png" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="CSS/General.css">
    <script src="JS/moment.js"></script>
      <script>
        function PriceCalculator() //Programa para calcular el coste de la reserva.
        {
            //Variables.
            var total = 0; //Coste total de la reserva.
            var daily = 0; //Coste reserva por dia (puede variar de un dia a otro).
            var base = 0; //Coste de la habitación base.
            var type = document.getElementById("list").value; //Tipo de habitación.
            var day =  moment(document.getElementById("start").value).format('L'); //Dia comienzo de la reserva (se modifica).
            var weekday = moment(day).format('dddd'); //Dia de la semana (se modifica).
            var month = (month = moment(day).month()) + 1; //Mes de la reserva (se modifica).
            var duration = getEventTime(); //Duración de la reserva.
            var index = duration; //Numero de repeticiones del bucle.


            if (type == 1) //Se indica el precio base de la habitación segun la variable type.
            {
                base = 30;
            }
            else if (type == 2)
            {
                base = 50;
            }

            while (index > 0 ) //Inicio bucle para calcular el precio final de la habitacion durante toda la reserva.
            {
                daily = 0; //Se resetea el coste de la habitacion diariamente.
                daily = costday(base, month, weekday, duration); //inicio subprograma.
                total = total + daily;
                day = moment(day).add(1, 'days').format("L"); //Avanzamos un dia la variable day.
                weekday = moment(day).format('dddd'); //Se actualiza, segun la variable day, el dia de la semana.
                month = (moment(day).month()) + 1; //Se acutaliza, segun la variable day, el mes.
                index = index - 1;
            }

            document.getElementById("respuesta").value = total; //Devuelve el coste por el form.
        }

        function costday(base, month, weekday, duration) //Subprograma para el calculo del coste final por dia.
        {
            var result = base; //Se iguala el result al precio base.
            if (duration = 1) //Si la reserva dura 1 dia, se le añade al precio base un 20%.
            {
                result = result * 1.20;
            }
            if (weekday == "Saturday" || weekday == "Sunday") //Si el dia de la semana es Sabado o Domingo, se le añade al precio un 15%.
            {
                result = result * 1.15;
            }
            if (duration > 7) //Si la reserva dura mas de 7 dias, se le descuenta al precio un 10%.
            {
                result = result * 0.90;
            }
            if (month == 6 || month == 7 || month == 8 || month == 9) //Si el dia esta en los meses de Junio, Julio, Agosto o Septiembre se le añade un 40%.
            {
                result = result * 1.40;
            }
            return result; //Devuelve el coste de la habitación por el dia indicado.
        }

        function getEventTime () //Subprograma para obtener la duración de la estancia.
        {
            var start = moment(document.getElementById("start").value); 
            var end = moment(document.getElementById("end").value); 
            return (moment.duration(end.diff(start)).asDays());
        } 
    </script>
</head>
<body>
<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>                        
      </button>
      <a class="navbar-brand" href="Inicio.html">Hotel*Star</a>
    </div>
    <div class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav">
        <li><a href="Inicio.html">Inicio</a></li>
        <li><a href="sobrehotel.html">Sobre nosotros</a></li>
        <li class="active"><a href="habitaciones.html">Habitaciones</a></li>
        <li><a href="contacts.html">Contáctanos</a></li>
      </ul>
      
    </div>
  </div>
</nav>
<div id="background">
<div id="myCarousel" class="carousel slide" data-ride="carousel">
    <!-- Indicadores -->
    <ol class="carousel-indicators">
      <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
      <li data-target="#myCarousel" data-slide-to="1"></li>
    </ol>

    <!-- Wrapper for slides -->
    <div class="carousel-inner" role="listbox">
      <div class="item active">
        
            <img src="IMG/cuarto1.jpg" alt="Image">
        <div class="carousel-caption">
          <h3>Habitación simple</h3>
          <p>Para algo más individual o íntima.</p>
        </div>      
      </div>

      <div class="item">
       <img src="IMG/habitacion-doble.4_f.jpg" alt="Image">
        <div class="carousel-caption">
          <h3>Habitación doble</h3>
          <p>Perfecta para la familia.</p> 
        </div>      
      </div>
    </div>

    <!-- Controles de izquierda y derecha -->
    <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
      <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
      <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
</div>
  
<div class="container text-center">    
  <br>
  <div class="row">
    <div class="col-sm-4">
      <img src="IMG/parejas--644x362.jpg" class="img-responsive" style="width:100%" alt="Image">
        <div class="well">
          <p>La habitación simple cuesta alrededor de 30€. </p>
          <br>
          <p>Esta habitación ha sido diseñada para ambitos más individuales o para dos personas.</p>
      </div>
    </div>
    <div class="col-sm-4"> 
      <img src="IMG/padres.png" class="img-responsive" style="width:100%" alt="Image"> 
        <div class="well">
          <p>La habitación doble cuesta alrededor de 50€. </p>
          <br>
          <p>Esta habitación ha sido diseñada para ambitos familiares o para grupos de tres o más personas.</p>
      </div>
    </div>
    <div class="col-sm-4">
        <div class="well">
        <form>
            Fecha de entrada: <input type="date" id="start"/> 
            <br><br>
            Fecha de salida: <input type="date" id="end"/> 
            <br><br>
            Tipo de habitación: <select id="list"> 
                <option value= 1>Simple</option>
                <option value= 2>Doble</option>
                <option value= 3 selected>-</option>
            </select> <br> <br>
            <input type="button" value="Calcular" onclick="PriceCalculator()" /><br /><br />
            Coste de estancia: <input type="text" id="respuesta" size="20" name="respuesta"/> <br /><br />
            <input type="reset" name="B2" value="Reset" />
        </form>
        </div>
    </div>
  </div>
</div><br>

<footer class="container-fluid text-center">
  <p>El precio de reserva puede variar un poco dependiendo del día que eligas para alojarte.</p>
    <br>
  <p>Y de hecho si reservas más de 7 noches recibiras un descuento, todo lo que sea por nuestros clientes.</p>
</footer>
</div>
</body>
</html>
